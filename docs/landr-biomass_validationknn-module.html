<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>LandR Biomass_validationKNN Module | LandR Manual</title>
  <meta name="description" content="A manual for the LandR ecosystem of SpaDES modules" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="LandR Biomass_validationKNN Module | LandR Manual" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/figures/LandRHex.png" />
  <meta property="og:description" content="A manual for the LandR ecosystem of SpaDES modules" />
  <meta name="github-repo" content="https://github.com/CeresBarros/LandR-Manual" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="LandR Biomass_validationKNN Module | LandR Manual" />
  
  <meta name="twitter:description" content="A manual for the LandR ecosystem of SpaDES modules" />
  <meta name="twitter:image" content="/figures/LandRHex.png" />

<meta name="author" content="Edited by: Ceres Barros, Alex M. Chubaty, Ian M. S. Eddy, Eliot J. B. McIntire" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="landr-validation-modules.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="docs/index.html">LandR Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li><a href="landr-biomass_core-module.html#landr-biomass_core-module">LandR <em>Biomass_core</em> Module</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html"><i class="fa fa-check"></i>Module Overview</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#module-summary"><i class="fa fa-check"></i>Module summary</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#module-inputs-and-parameters"><i class="fa fa-check"></i>Module inputs and parameters</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#events"><i class="fa fa-check"></i>Events</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#module-outputs"><i class="fa fa-check"></i>Module outputs</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#links-to-other-modules"><i class="fa fa-check"></i>Links to other modules</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#getting-help"><i class="fa fa-check"></i>Getting help</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#module-manual"><i class="fa fa-check"></i>Module manual</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li><a href="landr-biomass_core-module.html#differences-between-biomass_core-and-lbse">Differences between <em>Biomass_core</em> and LBSE</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#initialization-inputs-and-parameters"><i class="fa fa-check"></i>Initialization, inputs and parameters</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#simulation-flow"><i class="fa fa-check"></i>Simulation flow</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#usage-example"><i class="fa fa-check"></i>Usage example</a>
<ul>
<li><a href="landr-biomass_core-module.html#load-spades">Load <code>SpaDES</code></a></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#get-the-module"><i class="fa fa-check"></i>Get the module</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#setup-simulation"><i class="fa fa-check"></i>Setup simulation</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#run-simulation"><i class="fa fa-check"></i>Run simulation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#appendix"><i class="fa fa-check"></i>Appendix</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#tables"><i class="fa fa-check"></i>Tables</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#figures"><i class="fa fa-check"></i>Figures</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_core-module.html"><a href="landr-biomass_core-module.html#references"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-data-modules.html"><a href="landr-data-modules.html"><i class="fa fa-check"></i>LandR Data Modules</a></li>
<li><a href="landr-biomass_speciesdata-module.html#landr-biomass_speciesdata-module">LandR <em>Biomass_speciesData</em> Module</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html"><i class="fa fa-check"></i>Module Overview</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#module-summary-1"><i class="fa fa-check"></i>Module summary</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#module-inputs-and-parameters-at-a-glance"><i class="fa fa-check"></i>Module inputs and parameters at a glance</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#events-1"><i class="fa fa-check"></i>Events</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#module-outputs-1"><i class="fa fa-check"></i>Module outputs</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#links-to-other-modules-1"><i class="fa fa-check"></i>Links to other modules</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#getting-help-1"><i class="fa fa-check"></i>Getting help</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#module-manual-1"><i class="fa fa-check"></i>Module manual</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#detailed-description"><i class="fa fa-check"></i>Detailed description</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#initialization-inputs-and-parameters-1"><i class="fa fa-check"></i>Initialization, inputs and parameters</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#simulation-flow-1"><i class="fa fa-check"></i>Simulation flow</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#usage-example-1"><i class="fa fa-check"></i>Usage example</a>
<ul>
<li><a href="landr-biomass_speciesdata-module.html#load-spades-and-other-packages.">Load <code>SpaDES</code> and other packages.</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#get-module-necessary-packages-and-set-up-folder-directories"><i class="fa fa-check"></i>Get module, necessary packages and set up folder directories</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#setup-simulation-1"><i class="fa fa-check"></i>Setup simulation</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#run-module"><i class="fa fa-check"></i>Run module</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_speciesdata-module.html"><a href="landr-biomass_speciesdata-module.html#references-1"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li><a href="landr-biomass_borealdataprep-module.html#landr-biomass_borealdataprep-module">LandR <em>Biomass_borealDataPrep</em> Module</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html"><i class="fa fa-check"></i>Module Overview</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#module-summary-2"><i class="fa fa-check"></i>Module summary</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#module-inputs-and-parameters-at-a-glance-1"><i class="fa fa-check"></i>Module inputs and parameters at a glance</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#events-2"><i class="fa fa-check"></i>Events</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#module-outputs-2"><i class="fa fa-check"></i>Module outputs</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#links-to-other-modules-2"><i class="fa fa-check"></i>Links to other modules</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#getting-help-2"><i class="fa fa-check"></i>Getting help</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#module-manual-2"><i class="fa fa-check"></i>Module manual</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#detailed-description-1"><i class="fa fa-check"></i>Detailed description</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#data-acquisition-and-treatment"><i class="fa fa-check"></i>Data acquisition and treatment</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#parameter-estimationcalibration"><i class="fa fa-check"></i>Parameter estimation/calibration</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#initialization-inputs-and-parameters-2"><i class="fa fa-check"></i>Initialization, inputs and parameters</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#simulation-flow-2"><i class="fa fa-check"></i>Simulation flow</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#usage-example-2"><i class="fa fa-check"></i>Usage example</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_borealdataprep-module.html"><a href="landr-biomass_borealdataprep-module.html#references-2"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-validation-modules.html"><a href="landr-validation-modules.html"><i class="fa fa-check"></i>LandR Validation Modules</a></li>
<li><a href="landr-biomass_validationknn-module.html#landr-biomass_validationknn-module">LandR <em>Biomass_validationKNN</em> Module</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html"><i class="fa fa-check"></i>Module Overview</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#module-summary-3"><i class="fa fa-check"></i>Module summary</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#module-inputs-and-parameters-at-a-glance-2"><i class="fa fa-check"></i>Module inputs and parameters at a glance</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#events-3"><i class="fa fa-check"></i>Events</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#module-outputs-3"><i class="fa fa-check"></i>Module outputs</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#links-to-other-modules-3"><i class="fa fa-check"></i>Links to other modules</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#getting-help-3"><i class="fa fa-check"></i>Getting help</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#module-manual-3"><i class="fa fa-check"></i>Module manual</a>
<ul>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#detailed-description-2"><i class="fa fa-check"></i>Detailed description</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#validation-approaches"><i class="fa fa-check"></i>Validation approaches</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#initialization-inputs-and-parameters-3"><i class="fa fa-check"></i>Initialization, inputs and parameters</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#simulation-flow-3"><i class="fa fa-check"></i>Simulation flow</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#usage-example-3"><i class="fa fa-check"></i>Usage example</a>
<ul>
<li><a href="landr-biomass_validationknn-module.html#load-spades-and-other-packages.-1">Load <code>SpaDES</code> and other packages.</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#get-the-modules"><i class="fa fa-check"></i>Get the modules</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#setup-simulation-2"><i class="fa fa-check"></i>Setup simulation</a></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#run-simulation-1"><i class="fa fa-check"></i>Run simulation</a></li>
<li><a href="landr-biomass_validationknn-module.html#validate-simulation-outputs-with-biomass_validationknn">Validate simulation outputs with <em>Biomass_validationKNN</em></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="landr-biomass_validationknn-module.html"><a href="landr-biomass_validationknn-module.html#references-3"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">LandR Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="landr-biomass_validationknn-module" class="section level1">
<h1>LandR <em>Biomass_validationKNN</em> Module</h1>
<!-- the following are text references used in captions for LaTeX compatibility -->

<p><a href="http://commonmark.org"><img src="https://img.shields.io/badge/Made%20with-Markdown-1f425f.png" alt="made-with-Markdown" /></a>
<a href="https://github.com/PredictiveEcology/Biomass_validationKNN/issues"><img src="https://img.shields.io/badge/Get%20help-Report%20issues-%3CCOLOR%3E.png" alt="Generic badge" /></a></p>
<!-- if knitting to pdf remember to add the pandoc_args: ["--extract-media", "."] option to yml in order to get the badge images -->
<p><strong>This documentation is work in progress. Potential discrepancies and omissions
may exist for the time being. If you find any, do contact us using the link
above^^</strong></p>
<div id="authors-3" class="section level4">
<h4>Authors:</h4>
<p>Ceres Barros <a href="mailto:cbarros@mail.ubc.ca" class="email">cbarros@mail.ubc.ca</a> [aut, cre]
<!-- ideally separate authors with new lines, '\n' not working --></p>
</div>
<div id="module-overview-3" class="section level2">
<h2>Module Overview</h2>
<div id="module-summary-3" class="section level3">
<h3>Module summary</h3>
<p>An approach to validating outputs from LandR Biomass - notably the
<em>Biomass_core</em> vegetation simulation module - using publicly available data for
Canadian forests. This module produces both visual and statistical validation of
<em>Biomass_core</em> outputs that are related to species abundance and
presence/absence in the landscape. To do so, it downloads and prepares all
necessary data (observed and simulated), calculates validation statistics and
produces/saves validation plots.</p>
</div>
<div id="module-inputs-and-parameters-at-a-glance-2" class="section level3">
<h3>Module inputs and parameters at a glance</h3>
<p><em>Biomass_validationKNN</em> requires access to outputs of simulations from
<em>Biomass_core</em>, and internet access to retrieve the observed kNN datasets used
for validation. Raw data layers downloaded by the module are saved in
<code>dataPath(sim)</code>, which can be controlled via
<code>options(reproducible.destinationPath = ...)</code>.</p>
<p>We advise future users to run <em>Biomass_validationKNN</em> with defaults and inspect
what the objects are like before supplying their own data, or alternative data
URLs. We expect the number of validation modules to increase as other validation
approaches are developed based on project needs.</p>
<p>The module is able to compile all simulation output data provided that the user
supplies the object names and their file paths via the <code>simulationOutputs</code> input
object. Alternatively, the user may pass the pre-compiled outputs (namely the
<code>cohortData</code> and <code>pixelGroupMap</code> objects) via the <code>allCohortData</code> and
<code>pixelGroupMapStk</code> input objects. See <a href="landr-biomass_validationknn-module.html#input-objects-3">Input objects</a> for more detail.</p>
<p>Key parameters are those defining simulation years and replicates,
(<code>validationYears</code>, <code>validationReps</code>) and plot control (<code>.plots</code>). Here’s the
full list of parameters:</p>
<p>Below are the full lists of input objects (Table
<a href="landr-biomass_validationknn-module.html#tab:moduleInputs-Biomass-validationKNN">28</a>) and parameters (Table
<a href="landr-biomass_validationknn-module.html#tab:moduleParams-Biomass-validationKNN">29</a>) that <em>Biomass_validationKNN</em>
expects. The only input that <strong>must</strong> be provided (i.e., <em>Biomass_validationKNN</em>
does not have a default for) is <code>studyArea</code>. All other input objects and
parameters have internal defaults (see Tables
<a href="landr-biomass_validationknn-module.html#tab:moduleInputs2-Biomass-validationKNN">31</a> and
<a href="landr-biomass_validationknn-module.html#tab:moduleParams2-Biomass-validationKNN">32</a>. Objects suffixed with <code>*Start</code>
correspond to the same objects in the simulation without this suffix (e.g.
<code>rawBiomassMapStart</code> is <code>rawBiomassMap</code> in the simulation), whereas other
objects like <code>studyArea</code> and <code>rasterToMatch</code> have the same names in the
simulation and should be exactly the same object.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:moduleInputs-Biomass-validationKNN">Table 28: </span>List of <em>Biomass_validationKNN</em> input objects and their description.
</caption>
<thead>
<tr>
<th style="text-align:left;">
objectName
</th>
<th style="text-align:left;">
desc
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
allCohortData
</td>
<td style="text-align:left;">
All <code>cohortData</code> tables saved during the simulation, particularly for the validation years. If not supplied, the module will attempt to retrieve them using the ‘simulationOutputs’ table
</td>
</tr>
<tr>
<td style="text-align:left;">
biomassMap
</td>
<td style="text-align:left;">
total biomass raster layer in study area (in g/m^2), filtered for pixels covered by <code>cohortData</code>. Only used to calculate total no. of pixels being simulated If not supplied, will default to <code>rawBiomassMapStart</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
firePerimeters
</td>
<td style="text-align:left;">
A map of fire perimeters in the study area that can be used to exclude pixels that have been burnt during the validation period. If burnt pixels are not to be excluded Provide an empty <code>sf</code> object with the same properties as the default. Defaults to the latest Canadian Wildland Fire Information System National Burned Area Composite, subset to fires occuring up to last validation year (inclusively). Source URL determined by <code>fireURL</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
fireURL
</td>
<td style="text-align:left;">
A URL to a fire database, such as the Canadian National Fire Database, that is a zipped shapefile with fire polygons, an attribute (i.e., a column) named ‘Year’. If supplied (omitted with NULL or NA), this will be used to ‘update’ age pixels on <code>standAgeMap</code> with ‘time since fire’ as derived from this fire polygons map
</td>
</tr>
<tr>
<td style="text-align:left;">
pixelGroupMapStk
</td>
<td style="text-align:left;">
A stack of <code>pixelGroupMap</code>s saved during the simulation, particularly for the validation years. If not supplied, the module will attempt to make it using the ‘simulationOutputs’ table
</td>
</tr>
<tr>
<td style="text-align:left;">
rawBiomassMapStart
</td>
<td style="text-align:left;">
observed total biomass raster layer in study area at the first year of the validation period. Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived total aboveground biomass map from 2001 (in ton/ha). See <a href="https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990" class="uri">https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990</a> for metadata.
</td>
</tr>
<tr>
<td style="text-align:left;">
rawBiomassMapEnd
</td>
<td style="text-align:left;">
observed total biomass raster layer in study area at the last year of the validation period. Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived total aboveground biomass map from 2011 (in ton/ha) See <a href="https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990" class="uri">https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
rasterToMatch
</td>
<td style="text-align:left;">
A raster of the <code>studyArea</code> in the same resolution and projection as <code>rawBiomassMapStart</code>. This is the scale used for all outputs for use in the simulation.
</td>
</tr>
<tr>
<td style="text-align:left;">
rstLCChange
</td>
<td style="text-align:left;">
A mask-type map of land cover changes in the study area that can be used to exclude pixels that have been disturbed during the validation period. If disturbed pixels are not to be excluded Provide an empty sf object with the same properties as the default. Defaults to Canada’s forest change map between 1985-2011 (CFS), filtered for years 2001-2011 (inclusively) and all disturbances collapsed (map only has values of 1 and NA). See <code>P(sim)$LCChangeYr</code> parameter to change the period of disturbances, and <a href="https://opendata.nfis.org/mapserver/nfis-change_eng.html" class="uri">https://opendata.nfis.org/mapserver/nfis-change_eng.html</a> for more information.
</td>
</tr>
<tr>
<td style="text-align:left;">
rstLCChangeYr
</td>
<td style="text-align:left;">
An OPTIONAL map of land cover change years in the study area used to exclude pixels that have been disturbed during the validation period. It defaults to Canada’s forest change year national map between 1985-2011 (CFS). If <code>P(sim)$LCChangeYr</code> is not <code>NULL</code>, this layer is used to filted disturbed pixels that fall within the years specified by <code>P(sim)$LCChangeYr</code>. If <code>P(sim)$LCChangeYr</code> is <code>NULL</code> this layer is not used. See <a href="https://opendata.nfis.org/mapserver/nfis-change_eng.html" class="uri">https://opendata.nfis.org/mapserver/nfis-change_eng.html</a> for more information.
</td>
</tr>
<tr>
<td style="text-align:left;">
simulationOutputs
</td>
<td style="text-align:left;">
An OPTIONAL table listing simulation outputs (as passed to <code>spades()</code>, or <code>experiment) that will be used to make</code>allCohortData<code>,</code>pixelGroupMapStk<code>, if these are not provided. &lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;    &lt;td style="text-align:left;"&gt; speciesLayersStart &lt;/td&gt;    &lt;td style="text-align:left;"&gt; observed cover percentage raster layers by species in Canada species map, at the first year of the validation period. Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived species cover maps from 2001, using a cover threshold of 10% - see https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990 for metadata &lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;    &lt;td style="text-align:left;"&gt; speciesLayersEnd &lt;/td&gt;    &lt;td style="text-align:left;"&gt; observed percent cover raster layers by species in Canada used for validation at the last year of the validation period. Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived species cover maps from 2011 - see https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990 for metadata &lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;    &lt;td style="text-align:left;"&gt; sppColorVect &lt;/td&gt;    &lt;td style="text-align:left;"&gt; A named vector of colors to use for plotting. The names must be in sim$sppEquiv[[sim$sppEquivCol]], and should also contain a color for 'Mixed' &lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;    &lt;td style="text-align:left;"&gt; sppEquiv &lt;/td&gt;    &lt;td style="text-align:left;"&gt; table of species equivalencies. See</code>LandR::sppEquivalencies_CA`.
</td>
</tr>
<tr>
<td style="text-align:left;">
standAgeMapStart
</td>
<td style="text-align:left;">
observed stand age map in study area, at the first year of the validation period Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived biomass map from 2001 - see <a href="https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990" class="uri">https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990</a> for metadata
</td>
</tr>
<tr>
<td style="text-align:left;">
standAgeMapEnd
</td>
<td style="text-align:left;">
observed stand age raster layer in study area, at the last year of the validation period. Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived stand age map from 2011. See <a href="https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990" class="uri">https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
studyArea
</td>
<td style="text-align:left;">
Polygon to use as the study area. Must be provided by the user
</td>
</tr>
</tbody>
</table>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:moduleParams-Biomass-validationKNN">Table 29: </span>List of <em>Biomass_validationKNN</em> parameters and their description.
</caption>
<thead>
<tr>
<th style="text-align:left;">
paramName
</th>
<th style="text-align:left;">
paramDesc
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
coverThresh
</td>
<td style="text-align:left;">
The minimum % cover a species needs to have (per pixel) in the study area to be considered present. Should be the same as the one used to obtain the species cover layers for simulation set up.
</td>
</tr>
<tr>
<td style="text-align:left;">
deciduousCoverDiscount
</td>
<td style="text-align:left;">
This was estimated with data from NWT on March 18, 2020 and may or may not be universal. Should be the same as the one used when preparing <code>cohortData</code> in the simulation set up.
</td>
</tr>
<tr>
<td style="text-align:left;">
LCChangeYr
</td>
<td style="text-align:left;">
OPTIONAL. An integer or vector of integers of the validation period years, defining which years of land-cover changes (i.e. disturbances) should be excluded. <code>NULL</code> by default, which presumes no subsetting based on years is done internally (either the user supplies a pre-filtered <code>rstLCChange</code>, or no filtering is desired). If not <code>NULL</code> <code>rstLCChangeYr</code> is used to filter disturbed pixels within the specified years. See <a href="https://opendata.nfis.org/mapserver/nfis-change_eng.html" class="uri">https://opendata.nfis.org/mapserver/nfis-change_eng.html</a> for more information.
</td>
</tr>
<tr>
<td style="text-align:left;">
minCoverThreshold
</td>
<td style="text-align:left;">
Cover that is equal to or below this number will be omitted from the dataset Should be the same as the one used when preparing <code>cohortData</code> in the simulation set up.
</td>
</tr>
<tr>
<td style="text-align:left;">
obsDeltaAgeB
</td>
<td style="text-align:left;">
When TRUE, the observed changes in biomass and age (deltaB, deltaAge) between the two validation years will be plotted as maps and scatterplots
</td>
</tr>
<tr>
<td style="text-align:left;">
pixelGroupBiomassClass
</td>
<td style="text-align:left;">
When assigning <code>pixelGroup</code> membership, this defines the resolution of biomass that will be considered ‘the same pixelGroup’, e.g., if it is 100, then 5160 and 5240 will be the same Should be the same as the one used when preparing <code>cohortData</code> in the simulation set up.
</td>
</tr>
<tr>
<td style="text-align:left;">
sppEquivCol
</td>
<td style="text-align:left;">
The column in <code>sim$sppEquiv</code> data.table to use as a naming convention
</td>
</tr>
<tr>
<td style="text-align:left;">
validationReps
</td>
<td style="text-align:left;">
The simulation repetitions for the validation. Defaults to 1:10. Set to NA if not using repetitions (i.e. only one run)
</td>
</tr>
<tr>
<td style="text-align:left;">
validationYears
</td>
<td style="text-align:left;">
The simulation years for the validation. Defaults to 2001 and 2011. Must select two years
</td>
</tr>
<tr>
<td style="text-align:left;">
.plotInitialTime
</td>
<td style="text-align:left;">
If NA plotting is off completely (this includes saving).
</td>
</tr>
<tr>
<td style="text-align:left;">
.plots
</td>
<td style="text-align:left;">
Passed to <code>types</code> in Plots (see ?Plots). There are a few plots that are made within this module, if set. Note that plots (or their data) are saved in file.path(outputPath(sim), ‘figures’). If <code>NA</code>, plotting is off completely (this includes plot saving).
</td>
</tr>
<tr>
<td style="text-align:left;">
.saveInitialTime
</td>
<td style="text-align:left;">
This describes the simulation time at which the first save event should occur
</td>
</tr>
<tr>
<td style="text-align:left;">
.saveInterval
</td>
<td style="text-align:left;">
This describes the simulation time interval between save events
</td>
</tr>
<tr>
<td style="text-align:left;">
.studyAreaName
</td>
<td style="text-align:left;">
Human-readable name for the study area used. If <code>NA</code>, a hash of <code>studyArea</code> will be used.
</td>
</tr>
<tr>
<td style="text-align:left;">
.useCache
</td>
<td style="text-align:left;">
Controls cache; caches the init event by default
</td>
</tr>
</tbody>
</table>
</div>
<div id="events-3" class="section level3">
<h3>Events</h3>
<p>The following events take place during a <em>Biomass_validationKNN</em> run. Note that
this module only runs once (in one “time step”).</p>
<ul>
<li><p>Module initiation (<code>init</code> event) - prepares both the observed and simulated
data to be compared</p></li>
<li><p>Calculation of summary variables for validation (<code>calculateValidVars</code> event)</p></li>
<li><p>Calculation of validation statistics (<code>validationStats</code> event)</p></li>
<li><p>Optional diagnostic plots of biomass and age changes (<span class="math inline">\(\Delta\)</span>B,
<span class="math inline">\(\Delta\)</span>Age) in the observed data (<code>obsDeltaMaps</code> event).</p></li>
<li><p>Plotting events:</p>
<ul>
<li><p>Plots of landscape-wide (<code>landscapeWidePlots</code> event), pixel-level
(<code>pixelLevelPlots</code> events) comparisons of all summary variables</p></li>
<li><p>Plots of biomass and age changes (<span class="math inline">\(\Delta\)</span>B, <span class="math inline">\(\Delta\)</span>Age) in observed
and simulated data, with respect to the first year. (<code>deltaBComparisons</code>
event)</p></li>
</ul></li>
</ul>
</div>
<div id="module-outputs-3" class="section level3">
<h3>Module outputs</h3>
<p>The module produces the following outputs (Table
<a href="landr-biomass_validationknn-module.html#tab:moduleOutputs-Biomass-validationKNN">30</a>):</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:moduleOutputs-Biomass-validationKNN">Table 30: </span>List of <em>Biomass_validationKNN</em> output objects and their description.
</caption>
<thead>
<tr>
<th style="text-align:left;">
objectName
</th>
<th style="text-align:left;">
desc
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
logLikelihood
</td>
<td style="text-align:left;">
A table of negative sum log-likelihood values calculated for different variables and averaged across repetitions. At the moment, log-likelihood values are calculated for biomass (landscape- and pixel-level), species presences and dominance (lanscape-level) and deltaB (landscape- and pixel-level. For biomass and count data (presences/dominance, we assume an underlying multinomial distribution, and for deltaB a multivariate Gaussian distribution - note that the later is still under development.
</td>
</tr>
<tr>
<td style="text-align:left;">
landscapeMAD
</td>
<td style="text-align:left;">
Mean absolute deviance values calculated on landscape-level relative abundances, species presences and dominance, and deltaB, per repetition and year (except for deltaB, which is integrated across years)
</td>
</tr>
<tr>
<td style="text-align:left;">
landscapeVars
</td>
<td style="text-align:left;">
A table containing observed and simulated landscape-averaged variables used for validation (by year and repetition, ‘rep’, in the case of simulated data), namely: species relative abundances (‘relAbund’), species presenses (‘count’), species dominance (as in no. pixels where a given species, has higher ‘relAbund’; ‘countDom’) and species changes in biomass, as 2011 minus 2001 (‘deltaB’). Observed data rows are labelled as ‘observed’ in ‘dataType’ column. In species dominance, pixels with &gt;= 2 species with max(B) and pixels with no B are classified as ‘Mixed’ and ‘No veg.’, respectively in the ‘speciesCode’ column - note that this is ‘vegType’ column in <code>pixelCohortData</code>.
</td>
</tr>
<tr>
<td style="text-align:left;">
pixelCohortData
</td>
<td style="text-align:left;">
A table containing observed and simulated pixel-level data (by year and repetition, ‘rep’, in the case of simulated data) on species biomass (summed across cohorts, ‘B’), total pixel biomass (‘pixelB’), average biomass-weighted pixel age (‘pixelAge’), species relative abundance (calculated as B/pixelB, ‘relativeAbund’), species dominance (the species with max(B), ‘vegType’), and lanscape-wide biomass (‘landscapeB’). Observed data columns are suffixed with ‘Obsrvd’. In species dominance, pixels with &gt;= 2 species with max(B) (i.e. ‘noDoms’ &gt;= 2) are classified as ‘Mixed’.
</td>
</tr>
<tr>
<td style="text-align:left;">
pixelMAD
</td>
<td style="text-align:left;">
Mean absolute deviance values calculated on pixel-level relative abundances and deltaB, per repetition and year (except for deltaB, which is integrated across years)
</td>
</tr>
<tr>
<td style="text-align:left;">
pixelVars
</td>
<td style="text-align:left;">
The same as <code>landscapeVars</code>, but variables are calculated at the pixel-level
</td>
</tr>
<tr>
<td style="text-align:left;">
rstDisturbedPix
</td>
<td style="text-align:left;">
Raster of pixel IDs (as a mask) that have been disturbed by fire or suffered land-cover changes during the validation period. These pixels are excluded form the validation.
</td>
</tr>
<tr>
<td style="text-align:left;">
rawBiomassMapStart
</td>
<td style="text-align:left;">
observed total biomass raster layer in study area at the first year of the validation period. Filtered to exclude pixels that were disturbed during the validation period
</td>
</tr>
<tr>
<td style="text-align:left;">
rawBiomassMapEnd
</td>
<td style="text-align:left;">
observed total biomass raster layer in study area at the last year of the validation period. Filtered to exclude pixels that were disturbed during the validation period
</td>
</tr>
<tr>
<td style="text-align:left;">
speciesLayersStart
</td>
<td style="text-align:left;">
observed percent cover raster layers by species in Canada at the first year of the validation period. Filtered to exclude pixels that were disturbed during the validation period
</td>
</tr>
<tr>
<td style="text-align:left;">
speciesLayersEnd
</td>
<td style="text-align:left;">
observed percent cover raster layers by species in Canada at the last year of the validation period. Filtered to exclude pixels that were disturbed during the validation period
</td>
</tr>
<tr>
<td style="text-align:left;">
standAgeMapStart
</td>
<td style="text-align:left;">
observed stand age map in study area, at the first year of the validation period Filtered to exclude pixels that were disturbed during the validation period
</td>
</tr>
<tr>
<td style="text-align:left;">
standAgeMapEnd
</td>
<td style="text-align:left;">
observed stand age map in study area, at the last year of the validation period Filtered to exclude pixels that were disturbed during the validation period
</td>
</tr>
</tbody>
</table>
<p>and saves the validation figures in the output path defined in
<code>getPaths(sim)$outputPath</code> (which was defined as <code>paths$outputPath</code>). Tables are
not saved unless specified via <code>spades(outputs = data.frame(...), ...)</code>. If not
saving objects to disk (such as tables), these can be looked at using, e.g.,
<code>mySimValidation$logLikelihood</code>.</p>
</div>
<div id="links-to-other-modules-3" class="section level3">
<h3>Links to other modules</h3>
<p>Intended to be used with <em>Biomass_core</em> and any other modules that link to it
and affect cohort biomass (e.g., via <code>cohortData</code> table). You can see all
<em>potential</em> module linkages within the LandR ecosystem
<a href="https://rpubs.com/PredictiveEcology/LandR_Module_Ecosystem">here</a>. Select
<em>Biomass_validationKNN</em> from the drop-down menu to see linkages.</p>
</div>
<div id="getting-help-3" class="section level3">
<h3>Getting help</h3>
<ul>
<li><a href="https://github.com/PredictiveEcology/Biomass_validationKNN/issues" class="uri">https://github.com/PredictiveEcology/Biomass_validationKNN/issues</a></li>
</ul>
</div>
</div>
<div id="module-manual-3" class="section level2">
<h2>Module manual</h2>
<div id="detailed-description-2" class="section level3">
<h3>Detailed description</h3>
<p>This module compares simulated outputs of two years (across replicates), with
corresponding years of observed data. It was designed to compare the observed
data for years 2001 (start point for the simulation) and 2011 (i.e., after 10
years of simulation) of the kNN forest layers of the Canadian National Forest
Inventory – these are currently the only available FAIR datasets <span class="citation">(<em>sensu</em> <a href="#ref-StallEtAl2019" role="doc-biblioref">Stall <em>et al.</em> 2019</a>)</span>) on stand biomass and species % cover changes across Canada.
However, the user can supply other sources of observed data, as long as they
have an identical format.</p>
<p>The validation is done both visually (using barplots and boxplots) and using two
statistics: mean absolute deviation of simulated biomass (per species) and the
sum of negative log-likelihoods (SNLL) of predictions with respect to observed
data for species biomass, species presences/absences and changes in biomass
(<span class="math inline">\(\Delta\)</span>B) - the later is still under development.</p>
<p>This module assumes that the simulation data preparation was carried out by
<em>Biomass_borealDataPrep</em>, and so, to ensure that the comparison and the
simulated datasets are built with the same assumptions, the data treatment steps
in <em>Biomass_borealDataPrep</em> are repeated here. The module may also excludes
disturbed pixels coded in <code>rstLCCChange</code> and fire perimeter data
(<code>firePerimeters</code>). If this is not intended, pass a <code>rstLCCChange</code> with <code>NA</code>’s
only and/or an empty <code>firePerimeters</code> <code>sf</code> object. <em>Biomass_validationKNN</em> then
compares simulated species biomass, presences, dominance, and changes in biomass
against observed data available for the starting conditions (2011 by default)
and a second time point (e.g. 2011, or after 10 years of simulation). To do so,
for each year and replicate, and for both the simulated and observed data, the
module calculates:</p>
<ul>
<li><p>species relative abundances at the pixel- and landscape-level (across all
pixels)</p></li>
<li><p>species presences and dominance at the landscape level</p></li>
<li><p>changes in species biomass (<span class="math inline">\(\Delta\)</span>B) at the pixel- and landscape-level for
both the simulated and observed data. Biomass units respect those used in
<em>Biomass_core</em> (<span class="math inline">\(g/m^2\)</span>).</p></li>
</ul>
<p>Pixel-level relative abundances are calculated as the species biomass (summed
across cohorts) divided by the total pixel biomass (summed across cohorts and
species), while landscape-wide relative abundances are calculated as the sum of
a species biomass across all pixels divided by the sum of total biomass across
all pixels. Species presences are calculated as the number of pixels where a
given species is present, and species dominance is calculated as the number of
pixels where a species has the highest relative biomass in a given pixel. Pixels
where two or more species share the highest biomass value are classified as
‘mixed forest’, and pixels without any biomass are classified as ‘no veg.’.
Finally, (<span class="math inline">\(\Delta\)</span>B) is calculated per species as the final biomass (e.g., year
2011) minus the initial biomass (e.g., year 2001), either at the pixel- or
landscape-level. All calculations were done per replicate.</p>
</div>
<div id="validation-approaches" class="section level3">
<h3>Validation approaches</h3>
<div id="visual-validation" class="section level4">
<h4>Visual validation</h4>
<p>The module plots the above metrics as barplots showing landscape-level values
(averaged across replicates for the simulated data) or boxplots showing
pixel-level values. Plotting can be live and/or in the form of exported images
(or both turned off completely).</p>
</div>
<div id="mean-absolute-deviation" class="section level4">
<h4>Mean absolute deviation</h4>
<p>Mean absolute deviance (MAD) values are calculated on landscape- and pixel-level
species relative abundances and <span class="math inline">\(\Delta\)</span>B, and landscape-level species presences
and dominance, per replicate and year (except for <span class="math inline">\(\Delta\)</span>B, which is integrated
across years). Output tables with MAD values are exported as <code>landscapeMAD</code> and
<code>pixelMAD</code>, and the module also produces visual inspection of these values as
dot-and-whisker plots.</p>
</div>
<div id="sum-of-negative-log-likelihood-snll" class="section level4">
<h4>Sum of negative log-likelihood (SNLL)</h4>
<p>To provide a measure of overall goodness of fit of the simulation model, given a
given set of starting conditions and simulation mechanisms (i.e., the
combination of inputs to <em>Biomass_core</em> but also other modules that may be
associated in affecting vegetation dynamics), <em>Biomass_validationKNN</em> estimates
sum of negative log-likelihoods (SNLL) of simulated species biomasses, <span class="math inline">\(\Delta\)</span>B
(both at the landscape and pixel-level), and species presences (at the
landscape-level), with respect to their observed counterparts. More precisely,
let <span class="math inline">\(\ell\)</span> be the log-likelihood function denoting the probability of observing
<span class="math inline">\(x\)</span> of <span class="math inline">\(X\)</span> (a random variable following a continuous probability distribution
<span class="math inline">\(f(x)\)</span>), given a parameter <span class="math inline">\(\theta\)</span>:</p>
<span class="math display" id="eq:loglik">\[\begin{equation}
  \ell(\theta \mid x) = f(x)
  \tag{1}
\end{equation}\]</span>
<p>In our case, <span class="math inline">\(\theta\)</span> is equivalent to the model’s starting conditions and
structure, <span class="math inline">\(X\)</span> is the observed data with <span class="math inline">\(x\)</span> being the simulated values, and
<span class="math inline">\(f(x)\)</span> the continuous probability distribution of <span class="math inline">\(X\)</span>. For each variable that we
wanted to evaluate and for each simulation replicate, Equation <a href="landr-biomass_validationknn-module.html#eq:loglik">(1)</a>
is applied to calculate the SNLL estimated for each value of <span class="math inline">\(x\)</span> at the pixel or
landscape-level, <span class="math inline">\(i\)</span>:</p>
<span class="math display" id="eq:negsumloglik">\[\begin{equation}
  -\sum_{i = 1}^{N} \ell(\theta \mid x_{i})
  \tag{2}
\end{equation}\]</span>
<p>where <span class="math inline">\(N\)</span> is equal to total number of pixels. At the landscape scale <span class="math inline">\(N = 1\)</span>.</p>
<p>For species biomass and species presences, we draw the probability of observing
<span class="math inline">\(x_{i}\)</span> (a vector of species biomasses/presences in pixel/landscape <span class="math inline">\(i\)</span>) from a
multinomial density distribution
(<span class="math inline">\(f(x_{i}) = {\sf Multi}(n_{i}, \mathrm{p}_{i})\)</span>), where
<span class="math inline">\(n_{i} = \sum_{j = 1}^{K} X_{i,j}\)</span> (<span class="math inline">\(X\)</span> being the observed values of biomass of
<span class="math inline">\(j = 1, ..., K\)</span> species in a pixel/landscape <span class="math inline">\(i\)</span>) and <span class="math inline">\(\mathrm{p_{i}}\)</span> is the
vector of simulated values <span class="math inline">\(x_{i,j}\)</span>.</p>
<p><strong>The computation of SNLL for</strong> <span class="math inline">\(\Delta\)</span>B is still under development. We have
implemented the following, approach: For <span class="math inline">\(\Delta\)</span>B, we draw the probability of
observing <span class="math inline">\(x_{i,j}\)</span> (the simulated <span class="math inline">\(\Delta\)</span>B of <span class="math inline">\(j = 1, ..., K\)</span> species in a
pixel/landscape <span class="math inline">\(i\)</span>) from a multivariate Gaussian distribution,
<span class="math inline">\(f(x_{i}) = \mathcal {N}(\mu_{i}, \mathrm{M}_{i})\)</span>, where <span class="math inline">\(\mu_{i}\)</span> is the
vector of observed mean <span class="math inline">\(\Delta\)</span>B for each species <span class="math inline">\(j = 1, ..., K\)</span>, and
<span class="math inline">\(\mathrm{M}\)</span> is the observed <span class="math inline">\(K * K\)</span> variance-covariance matrix of species
<span class="math inline">\(\Delta\)</span>B. Unfortunately this is presenting problems, due to <span class="math inline">\(\mathrm{M}\)</span> not
being strictly positive definite.</p>
<p>After calculating SNLL across pixels (or for a landscape), values are averaged
across replicates for an overall model estimate and exported in the
<code>logLikelihood</code> table.</p>
<p>We refer to the Wikipedia pages on the <a href="https://en.wikipedia.org/wiki/Multinomial_distribution">multinomial
distribution</a> and on the
<a href="https://en.wikipedia.org/wiki/Multivariate_normal_distribution#Density_function">multivariate Gaussian
distribution</a>
for a good summary of these two distributions and their use in SNLL estimation.</p>
</div>
</div>
<div id="initialization-inputs-and-parameters-3" class="section level3">
<h3>Initialization, inputs and parameters</h3>
<p><em>Biomass_validationKNN</em> initializes itself and prepares all inputs provided that
it has access to outputs of simulations from <em>Biomass_core</em>, and internet access
to retrieve the observed kNN datasets used for validation. Future users should
run <em>Biomass_validationKNN</em> with defaults and inspect what the objects are like
before supplying their own data, or alternative data URLs. Alternatively, users
may develop their own validation modules using <em>Biomass_validationKNN</em> as a
template.</p>
<div id="input-objects-3" class="section level4">
<h4>Input objects</h4>
<p><em>Biomass_validationKNN</em> requires the following input data layers: land-cover
change (change type and year), fire perimeters, % species cover, stand age and
stand biomass. By default, the module will take these from National Forest
Inventory kNN layers for years 2001 and 2011. We recommend that the user
supplies layers used to initialise the simulation as the starting input layers
(2001 if that is the starting point) to guarantee that they match. Table
<a href="landr-biomass_validationknn-module.html#tab:moduleInputs2-Biomass-validationKNN">31</a> shows the full list of input
objects used by the module.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:moduleInputs2-Biomass-validationKNN">Table 31: </span>List of <em>Biomass_validationKNN</em> input objects and their description.
</caption>
<thead>
<tr>
<th style="text-align:left;">
objectName
</th>
<th style="text-align:left;">
objectClass
</th>
<th style="text-align:left;">
desc
</th>
<th style="text-align:left;">
sourceURL
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
allCohortData
</td>
<td style="text-align:left;">
data.table
</td>
<td style="text-align:left;">
All <code>cohortData</code> tables saved during the simulation, particularly for the validation years. If not supplied, the module will attempt to retrieve them using the ‘simulationOutputs’ table
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
biomassMap
</td>
<td style="text-align:left;">
RasterLayer
</td>
<td style="text-align:left;">
total biomass raster layer in study area (in g/m^2), filtered for pixels covered by <code>cohortData</code>. Only used to calculate total no. of pixels being simulated If not supplied, will default to <code>rawBiomassMapStart</code>
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
firePerimeters
</td>
<td style="text-align:left;">
sf
</td>
<td style="text-align:left;">
A map of fire perimeters in the study area that can be used to exclude pixels that have been burnt during the validation period. If burnt pixels are not to be excluded Provide an empty <code>sf</code> object with the same properties as the default. Defaults to the latest Canadian Wildland Fire Information System National Burned Area Composite, subset to fires occuring up to last validation year (inclusively). Source URL determined by <code>fireURL</code>
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
fireURL
</td>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
A URL to a fire database, such as the Canadian National Fire Database, that is a zipped shapefile with fire polygons, an attribute (i.e., a column) named ‘Year’. If supplied (omitted with NULL or NA), this will be used to ‘update’ age pixels on <code>standAgeMap</code> with ‘time since fire’ as derived from this fire polygons map
</td>
<td style="text-align:left;">
<a href="https://cwfis.cfs.nrcan.gc.ca/downloads/nfdb/fire_poly/current_version/NFDB_poly.zip" class="uri">https://cwfis.cfs.nrcan.gc.ca/downloads/nfdb/fire_poly/current_version/NFDB_poly.zip</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
pixelGroupMapStk
</td>
<td style="text-align:left;">
RasterStack
</td>
<td style="text-align:left;">
A stack of <code>pixelGroupMap</code>s saved during the simulation, particularly for the validation years. If not supplied, the module will attempt to make it using the ‘simulationOutputs’ table
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
rawBiomassMapStart
</td>
<td style="text-align:left;">
RasterLayer
</td>
<td style="text-align:left;">
observed total biomass raster layer in study area at the first year of the validation period. Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived total aboveground biomass map from 2001 (in ton/ha). See <a href="https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990" class="uri">https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990</a> for metadata.
</td>
<td style="text-align:left;">
<a href="http://ftp.maps.canada.ca/pub/nrcan_rncan/Forests_Foret/canada-forests-attributes_attributs-forests-canada/2001-attributes_attributs-2001/NFI_MODIS250m_2001_kNN_Structure_Biomass_TotalLiveAboveGround_v1.tif" class="uri">http://ftp.maps.canada.ca/pub/nrcan_rncan/Forests_Foret/canada-forests-attributes_attributs-forests-canada/2001-attributes_attributs-2001/NFI_MODIS250m_2001_kNN_Structure_Biomass_TotalLiveAboveGround_v1.tif</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
rawBiomassMapEnd
</td>
<td style="text-align:left;">
RasterLayer
</td>
<td style="text-align:left;">
observed total biomass raster layer in study area at the last year of the validation period. Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived total aboveground biomass map from 2011 (in ton/ha) See <a href="https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990" class="uri">https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990</a>
</td>
<td style="text-align:left;">
<a href="http://ftp.maps.canada.ca/pub/nrcan_rncan/Forests_Foret/canada-forests-attributes_attributs-forests-canada/2011-attributes_attributs-2011/NFI_MODIS250m_2011_kNN_Structure_Biomass_TotalLiveAboveGround_v1.tif" class="uri">http://ftp.maps.canada.ca/pub/nrcan_rncan/Forests_Foret/canada-forests-attributes_attributs-forests-canada/2011-attributes_attributs-2011/NFI_MODIS250m_2011_kNN_Structure_Biomass_TotalLiveAboveGround_v1.tif</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
rasterToMatch
</td>
<td style="text-align:left;">
RasterLayer
</td>
<td style="text-align:left;">
A raster of the <code>studyArea</code> in the same resolution and projection as <code>rawBiomassMapStart</code>. This is the scale used for all outputs for use in the simulation.
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
rstLCChange
</td>
<td style="text-align:left;">
RasterLayer
</td>
<td style="text-align:left;">
A mask-type map of land cover changes in the study area that can be used to exclude pixels that have been disturbed during the validation period. If disturbed pixels are not to be excluded Provide an empty sf object with the same properties as the default. Defaults to Canada’s forest change map between 1985-2011 (CFS), filtered for years 2001-2011 (inclusively) and all disturbances collapsed (map only has values of 1 and NA). See <code>P(sim)$LCChangeYr</code> parameter to change the period of disturbances, and <a href="https://opendata.nfis.org/mapserver/nfis-change_eng.html" class="uri">https://opendata.nfis.org/mapserver/nfis-change_eng.html</a> for more information.
</td>
<td style="text-align:left;">
<a href="https://opendata.nfis.org/downloads/forest_change/C2C_change_type_1985_2011.zip" class="uri">https://opendata.nfis.org/downloads/forest_change/C2C_change_type_1985_2011.zip</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
rstLCChangeYr
</td>
<td style="text-align:left;">
RasterLayer
</td>
<td style="text-align:left;">
An OPTIONAL map of land cover change years in the study area used to exclude pixels that have been disturbed during the validation period. It defaults to Canada’s forest change year national map between 1985-2011 (CFS). If <code>P(sim)$LCChangeYr</code> is not <code>NULL</code>, this layer is used to filted disturbed pixels that fall within the years specified by <code>P(sim)$LCChangeYr</code>. If <code>P(sim)$LCChangeYr</code> is <code>NULL</code> this layer is not used. See <a href="https://opendata.nfis.org/mapserver/nfis-change_eng.html" class="uri">https://opendata.nfis.org/mapserver/nfis-change_eng.html</a> for more information.
</td>
<td style="text-align:left;">
<a href="https://opendata.nfis.org/downloads/forest_change/C2C_change_year_1985_2011.zip" class="uri">https://opendata.nfis.org/downloads/forest_change/C2C_change_year_1985_2011.zip</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
simulationOutputs
</td>
<td style="text-align:left;">
data.table
</td>
<td style="text-align:left;">
An OPTIONAL table listing simulation outputs (as passed to <code>spades()</code>, or <code>experiment) that will be used to make</code>allCohortData<code>,</code>pixelGroupMapStk<code>, if these are not provided. &lt;/td&gt;    &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;    &lt;td style="text-align:left;"&gt; speciesLayersStart &lt;/td&gt;    &lt;td style="text-align:left;"&gt; RasterStack &lt;/td&gt;    &lt;td style="text-align:left;"&gt; observed cover percentage raster layers by species in Canada species map, at the first year of the validation period. Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived species cover maps from 2001, using a cover threshold of 10% - see https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990 for metadata &lt;/td&gt;    &lt;td style="text-align:left;"&gt; http://ftp.maps.canada.ca/pub/nrcan_rncan/Forests_Foret/canada-forests-attributes_attributs-forests-canada/2001-attributes_attributs-2001/ &lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;    &lt;td style="text-align:left;"&gt; speciesLayersEnd &lt;/td&gt;    &lt;td style="text-align:left;"&gt; RasterStack &lt;/td&gt;    &lt;td style="text-align:left;"&gt; observed percent cover raster layers by species in Canada used for validation at the last year of the validation period. Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived species cover maps from 2011 - see https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990 for metadata &lt;/td&gt;    &lt;td style="text-align:left;"&gt; http://ftp.maps.canada.ca/pub/nrcan_rncan/Forests_Foret/canada-forests-attributes_attributs-forests-canada/2011-attributes_attributs-2011/ &lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;    &lt;td style="text-align:left;"&gt; sppColorVect &lt;/td&gt;    &lt;td style="text-align:left;"&gt; character &lt;/td&gt;    &lt;td style="text-align:left;"&gt; A named vector of colors to use for plotting. The names must be in sim$sppEquiv[[sim$sppEquivCol]], and should also contain a color for 'Mixed' &lt;/td&gt;    &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;   &lt;/tr&gt;   &lt;tr&gt;    &lt;td style="text-align:left;"&gt; sppEquiv &lt;/td&gt;    &lt;td style="text-align:left;"&gt; data.table &lt;/td&gt;    &lt;td style="text-align:left;"&gt; table of species equivalencies. See</code>LandR::sppEquivalencies_CA`.
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
standAgeMapStart
</td>
<td style="text-align:left;">
RasterLayer
</td>
<td style="text-align:left;">
observed stand age map in study area, at the first year of the validation period Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived biomass map from 2001 - see <a href="https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990" class="uri">https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990</a> for metadata
</td>
<td style="text-align:left;">
<a href="http://ftp.maps.canada.ca/pub/nrcan_rncan/Forests_Foret/canada-forests-attributes_attributs-forests-canada/2001-attributes_attributs-2001/NFI_MODIS250m_2001_kNN_Structure_Stand_Age_v1.tif" class="uri">http://ftp.maps.canada.ca/pub/nrcan_rncan/Forests_Foret/canada-forests-attributes_attributs-forests-canada/2001-attributes_attributs-2001/NFI_MODIS250m_2001_kNN_Structure_Stand_Age_v1.tif</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
standAgeMapEnd
</td>
<td style="text-align:left;">
RasterLayer
</td>
<td style="text-align:left;">
observed stand age raster layer in study area, at the last year of the validation period. Defaults to the Canadian Forestry Service, National Forest Inventory, kNN-derived stand age map from 2011. See <a href="https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990" class="uri">https://open.canada.ca/data/en/dataset/ec9e2659-1c29-4ddb-87a2-6aced147a990</a>
</td>
<td style="text-align:left;">
<a href="http://ftp.maps.canada.ca/pub/nrcan_rncan/Forests_Foret/canada-forests-attributes_attributs-forests-canada/2011-attributes_attributs-2011/NFI_MODIS250m_2011_kNN_Structure_Stand_Age_v1.tif" class="uri">http://ftp.maps.canada.ca/pub/nrcan_rncan/Forests_Foret/canada-forests-attributes_attributs-forests-canada/2011-attributes_attributs-2011/NFI_MODIS250m_2011_kNN_Structure_Stand_Age_v1.tif</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
studyArea
</td>
<td style="text-align:left;">
SpatialPolygonsDataFrame
</td>
<td style="text-align:left;">
Polygon to use as the study area. Must be provided by the user
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p>Of the inputs in Table <a href="landr-biomass_validationknn-module.html#tab:moduleInputs2-Biomass-validationKNN">31</a>, the
following are particularly important and deserve special attention:</p>
<ul>
<li><p><strong>Spatial layers</strong></p>
<ul>
<li><p><code>biomassMap</code> – a map of simulated stand biomass (in <span class="math inline">\(g/m^2\)</span> ) filtered
for the pixels where cohort dynamics were simulated. This corresponds to
the <code>sim$biomassMap</code> object produced by <em>Biomass_borealDataPrep</em> or to
the <code>sim$simulatedBiomassMap</code> produced by <em>Biomass_core</em>.</p></li>
<li><p><code>firePerimeters</code> – a fire perimeters polygon map that should be used to
exclude recently burned pixels from the analysis. If this is not desired
the user needs to provide an empty <code>sf</code> object (e.g.,
<code>sf::st_polygon()</code>) .</p></li>
<li><p><code>rawBiomassMapStart</code> – raw biomass data used to initialize and
parametrize <code>Biomass_core</code>. By default, the module uses the stand
biomass map from KNN for the year 2001. The user must make sure this
appropriate for their use case, or else supply the correct raster layer.</p></li>
<li><p><code>rawBiomassMapEnd</code> – raw biomass data used to validate the model after
several simualtion years. By default, the module uses the stand biomass
map from KNN for the year 2011, which is compared with the 10th year of
a simulation initialised using the KNN 2001 data. The user must make
sure this appropriate for their use case, or else supply the correct
raster layer.</p></li>
<li><p><code>rstLCChange</code> – a binary raster layer with disturbed pixels that should
be removed from the analyses. Can be combined with <code>rstLCChangeYr</code> to
filter pixels disturbed in a given time period defined by
<code>P(sim)$LCChangeYr</code>. Defaults to <a href="https://opendata.nfis.org/downloads/forest_change/C2C_change_type_1985_2011.zip">Canada’s forest change national map
between 1985-2011
(CFS)</a>.</p></li>
<li><p><code>rstLCChangeYr</code> – a raster layer with year of disturbance. This is an
optional layer that can be combined with <code>rstLCChange</code> and
<code>P(sim)$LCChangeYr</code> to filter disturbed pixels by year of disturbance.
Not used by default. Defaults to <a href="https://opendata.nfis.org/downloads/forest_change/C2C_change_year_1985_2011.zip">Canada’s forest change year national
map between 1985-2011
(CFS)</a>.</p></li>
<li><p><code>speciesLayersStart</code> – same as <code>rawBiomassMapStart</code>, but with respect
to species % cover data.</p></li>
<li><p><code>speciesLayersEnd</code> – same as <code>rawBiomassMapEnd</code>, but with respect to
species % cover data.</p></li>
<li><p><code>studyArea</code> – shapefile. A <code>SpatialPolygonsDataFrame</code> with a single
polygon determining the where the simulation will take place. This is
the only input object that <strong>must be supplied by the user</strong>.</p></li>
</ul></li>
<li><p><strong>Simulation-related objects</strong></p>
<ul>
<li><p><code>allCohortData</code> – OPTIONAL. A <code>data.table</code> containing all <code>cohortData</code>
objects relevant for the validation (e.g., as many <code>cohortData</code> objects
as simulation replicates times 2, for the beginning and end year). If
not supplied, <em>Biomass_validationKNN</em> attempts to produce this object
using the <code>cohortData</code> object file listed in <code>simulationOutputs</code> .
Hence, the user must either supply <strong>both</strong> <code>allCohortData</code> and
<code>pixelGroupMapStk</code> <strong>or</strong> <code>simulationOutputs.</code></p></li>
<li><p><code>pixelGroupMapStk</code> – OPTIONAL. As <code>allCohortData</code> but with respect to
<code>pixelGroupMap</code> objects.</p></li>
<li><p><code>simulationOutputs</code> – OPTIONAL. A <code>data.frame</code> that has the same
structure as the <code>data.frame</code>’s specifying outputs to be saved in
<code>spades(…, outputs = data.frame(…))</code>. We advise passing the same
<code>data.frame</code> that was supplied to <code>spades</code> during the simulation call,
but filtered by the relevant <code>cohortData</code> and <code>pixelGroupMap</code> objects
and, potentially, with file paths corrected to match the current working
directory (see <a href="landr-biomass_validationknn-module.html#usage-example-3">Usage example</a>). Only used if <code>allCohortData</code> and
<code>pixelGroupMapStk</code> are not supplied.</p></li>
<li><p><code>pixelGroupMap</code> – a raster layer with <em>pixelGroup</em> IDs per pixel.
Pixels are always grouped based on identical <em>ecoregionGroup</em>,
<em>speciesCode</em>, <em>age</em> and <em>B</em> composition, even if the user supplies
other initial groupings (e.g., this is possible in the
<em>Biomass_borealDataPrep</em> data module).</p></li>
</ul></li>
</ul>
</div>
<div id="parameters-3" class="section level4">
<h4>Parameters</h4>
<p>Table <a href="landr-biomass_validationknn-module.html#tab:moduleParams2-Biomass-validationKNN">32</a> lists all parameters used
in <em>Biomass_validationKNN</em> and their detailed information.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:moduleParams2-Biomass-validationKNN">Table 32: </span>List of <em>Biomass_validationKNN</em> parameters and their description.
</caption>
<thead>
<tr>
<th style="text-align:left;">
paramName
</th>
<th style="text-align:left;">
paramClass
</th>
<th style="text-align:left;">
default
</th>
<th style="text-align:left;">
min
</th>
<th style="text-align:left;">
max
</th>
<th style="text-align:left;">
paramDesc
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
coverThresh
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
The minimum % cover a species needs to have (per pixel) in the study area to be considered present. Should be the same as the one used to obtain the species cover layers for simulation set up.
</td>
</tr>
<tr>
<td style="text-align:left;">
deciduousCoverDiscount
</td>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
0.8418911
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
This was estimated with data from NWT on March 18, 2020 and may or may not be universal. Should be the same as the one used when preparing <code>cohortData</code> in the simulation set up.
</td>
</tr>
<tr>
<td style="text-align:left;">
LCChangeYr
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
1900
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
OPTIONAL. An integer or vector of integers of the validation period years, defining which years of land-cover changes (i.e. disturbances) should be excluded. <code>NULL</code> by default, which presumes no subsetting based on years is done internally (either the user supplies a pre-filtered <code>rstLCChange</code>, or no filtering is desired). If not <code>NULL</code> <code>rstLCChangeYr</code> is used to filter disturbed pixels within the specified years. See <a href="https://opendata.nfis.org/mapserver/nfis-change_eng.html" class="uri">https://opendata.nfis.org/mapserver/nfis-change_eng.html</a> for more information.
</td>
</tr>
<tr>
<td style="text-align:left;">
minCoverThreshold
</td>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:left;">
Cover that is equal to or below this number will be omitted from the dataset Should be the same as the one used when preparing <code>cohortData</code> in the simulation set up.
</td>
</tr>
<tr>
<td style="text-align:left;">
obsDeltaAgeB
</td>
<td style="text-align:left;">
logical
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
When TRUE, the observed changes in biomass and age (deltaB, deltaAge) between the two validation years will be plotted as maps and scatterplots
</td>
</tr>
<tr>
<td style="text-align:left;">
pixelGroupBiomassClass
</td>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
When assigning <code>pixelGroup</code> membership, this defines the resolution of biomass that will be considered ‘the same pixelGroup’, e.g., if it is 100, then 5160 and 5240 will be the same Should be the same as the one used when preparing <code>cohortData</code> in the simulation set up.
</td>
</tr>
<tr>
<td style="text-align:left;">
sppEquivCol
</td>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
Boreal
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
The column in <code>sim$sppEquiv</code> data.table to use as a naming convention
</td>
</tr>
<tr>
<td style="text-align:left;">
validationReps
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
1, 2, 3,….
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
The simulation repetitions for the validation. Defaults to 1:10. Set to NA if not using repetitions (i.e. only one run)
</td>
</tr>
<tr>
<td style="text-align:left;">
validationYears
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
2001, 2011
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
The simulation years for the validation. Defaults to 2001 and 2011. Must select two years
</td>
</tr>
<tr>
<td style="text-align:left;">
.plotInitialTime
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
If NA plotting is off completely (this includes saving).
</td>
</tr>
<tr>
<td style="text-align:left;">
.plots
</td>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
object, png
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Passed to <code>types</code> in Plots (see ?Plots). There are a few plots that are made within this module, if set. Note that plots (or their data) are saved in file.path(outputPath(sim), ‘figures’). If <code>NA</code>, plotting is off completely (this includes plot saving).
</td>
</tr>
<tr>
<td style="text-align:left;">
.saveInitialTime
</td>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
This describes the simulation time at which the first save event should occur
</td>
</tr>
<tr>
<td style="text-align:left;">
.saveInterval
</td>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
This describes the simulation time interval between save events
</td>
</tr>
<tr>
<td style="text-align:left;">
.studyAreaName
</td>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Human-readable name for the study area used. If <code>NA</code>, a hash of <code>studyArea</code> will be used.
</td>
</tr>
<tr>
<td style="text-align:left;">
.useCache
</td>
<td style="text-align:left;">
logical
</td>
<td style="text-align:left;">
init
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Controls cache; caches the init event by default
</td>
</tr>
</tbody>
</table>
<p>Of the parameters listed in Table
<a href="landr-biomass_validationknn-module.html#tab:moduleParams2-Biomass-validationKNN">32</a>, the following are particularly
important:</p>
<ul>
<li><p><code>LCChangeYr</code> – integer. Optional parameter defining the years of
disturbance that should be filtered out of the analysis using the
<code>rstLCChangeYr</code> layer. This parameter is set to <code>NULL</code> by default, meaning
that <code>rstLCChangeYr</code> will not be used.</p></li>
<li><p><code>sppEquivCol</code> – character. the column name in <code>speciesEquivalency</code>
data.table that defines the naming convention to use throughout the
simulation.</p></li>
<li><p><code>validationReps</code> – integer. which simulation replicates should be used for
the validation.</p></li>
<li><p><code>validationYears</code> – integer. What simulation years should be used for the
validation - the year number needs to match the observed data year. For
instance, if the first observed data year is 2001, that must be the first
simulation year.</p></li>
</ul>
</div>
</div>
<div id="simulation-flow-3" class="section level3">
<h3>Simulation flow</h3>
<p>The general flow of <em>Biomass_validationKNN</em> processes is:</p>
<ol style="list-style-type: decimal">
<li><p>Preparation of all necessary objects, namely obtaining the observed data
layers from online repositories (or if available stored local copies) and
the compiling simulated data if the user has not done so previously (see
<a href="landr-biomass_validationknn-module.html#input-objects-3">Input objects</a>).</p></li>
<li><p>Calculation of summary variables for validation, namely:</p>
<ul>
<li><p>relative biomass per species per pixel and across the landscape (per
year and per replicate)</p></li>
<li><p>changes in species biomass per pixel and across the landscape (per
replicate), with respect to the first year.</p></li>
<li><p>species dominance across the landscape</p></li>
<li><p>species presences across the landscape</p></li>
</ul></li>
<li><p>Calculation of validation statistics, namely mean absolute deviations (MAD)
and sum of negative log-likelihoods (SNLL).</p></li>
<li><p>Assessment of the relationship between observed <span class="math inline">\(\Delta\)</span>B and observed
<span class="math inline">\(\Delta\)</span>Age – this is an optional visual diagnostic of the observed data
that produces scatterplots of <span class="math inline">\(\Delta\)</span>B ~ <span class="math inline">\(\Delta\)</span>Age of three types:</p>
<ul>
<li><p>With raw observed values of <span class="math inline">\(\Delta\)</span>B and <span class="math inline">\(\Delta\)</span>Age</p></li>
<li><p>With <span class="math inline">\(\Delta\)</span>B and <span class="math inline">\(\Delta\)</span>Age calculated on observed data <em>after</em>
pre-processing (i.e., the data clean-steps done in
<code>Biomass_borealDataPrep</code>, which are also done to the observed data
before validation)</p></li>
<li><p>With the data shown in 2) above, but filtered by pixels where there was
only a stand age increment corresponding to the number of years of
between the two validation time points. This is not necessarily a
<em>correct</em> filter, as stands may have suffered an age reduction due to
the loss of old cohorts from background mortality (i.e., not coming from
disturbances. However, if using the default input datasets, it is
unlikely that this is a widespread phenomenon in only 10 years. We
remind the user that disturbed pixels should be removed from the
analyses when validating succession dynamics in the absence of
disturbance - the default option.</p></li>
</ul></li>
<li><p>Plots:</p>
<ul>
<li><p>Barplots of landscape-wide and pixel-level comparisons between observed
and simulated data, with respect to relative biomass, dominance and
presences.</p></li>
<li><p>Boxplots of biomass changes (<span class="math inline">\(\Delta\)</span>B) in observed and simulated data,
with respect to the first year.</p></li>
<li><p>Maps of biomass and age changes (<span class="math inline">\(\Delta\)</span>B, <span class="math inline">\(\Delta\)</span>Age) with respect to
the first year, in observed and simulated data.</p></li>
</ul></li>
</ol>
<p>All module default outputs are in the form of plots, but the user can chose to
save any objects (see Table <a href="landr-biomass_validationknn-module.html#tab:moduleOutputs-Biomass-validationKNN">30</a>).</p>
</div>
</div>
<div id="usage-example-3" class="section level2">
<h2>Usage example</h2>
<div id="load-spades-and-other-packages.-1" class="section level3">
<h3>Load <code>SpaDES</code> and other packages.</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="landr-biomass_validationknn-module.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SpaDES)</span>
<span id="cb12-2"><a href="landr-biomass_validationknn-module.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SpaDES.install)</span>
<span id="cb12-3"><a href="landr-biomass_validationknn-module.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SpaDES.experiment)</span>
<span id="cb12-4"><a href="landr-biomass_validationknn-module.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(future)</span></code></pre></div>
</div>
<div id="get-the-modules" class="section level3">
<h3>Get the modules</h3>
<p>Because <em>Biomass_validationKNN</em> is meant to validate simulation outputs against
observed data, we need to first run a simulation of forest dynamics with
<em>Biomass_core</em>. To do that we get both modules’ code from the PredictiveEcology
GitHub repository. Notice that we are placing all module code, inputs and
outputs in temporary directories.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="landr-biomass_validationknn-module.html#cb13-1" aria-hidden="true" tabindex="-1"></a>tempDir <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb13-2"><a href="landr-biomass_validationknn-module.html#cb13-2" aria-hidden="true" tabindex="-1"></a>spadesModulesDirectory <span class="ot">&lt;-</span> <span class="fu">file.path</span>(tempDir, <span class="st">&quot;modules&quot;</span>)</span>
<span id="cb13-3"><a href="landr-biomass_validationknn-module.html#cb13-3" aria-hidden="true" tabindex="-1"></a>paths <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">inputPath =</span> <span class="fu">file.path</span>(tempDir, <span class="st">&quot;inputs&quot;</span>), </span>
<span id="cb13-4"><a href="landr-biomass_validationknn-module.html#cb13-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">cachePath =</span> <span class="fu">file.path</span>(tempDir, <span class="st">&quot;cache&quot;</span>), </span>
<span id="cb13-5"><a href="landr-biomass_validationknn-module.html#cb13-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">modulePath =</span> spadesModulesDirectory, </span>
<span id="cb13-6"><a href="landr-biomass_validationknn-module.html#cb13-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">outputPath =</span> <span class="fu">file.path</span>(tempDir, <span class="st">&quot;outputs&quot;</span>))</span>
<span id="cb13-7"><a href="landr-biomass_validationknn-module.html#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="landr-biomass_validationknn-module.html#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">getModule</span>(<span class="st">&quot;PredictiveEcology/Biomass_core&quot;</span>, <span class="at">modulePath =</span> spadesModulesDirectory, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-9"><a href="landr-biomass_validationknn-module.html#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="fu">getModule</span>(<span class="st">&quot;PredictiveEcology/Biomass_validationKNN&quot;</span>, <span class="at">modulePath =</span> spadesModulesDirectory, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-10"><a href="landr-biomass_validationknn-module.html#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="landr-biomass_validationknn-module.html#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="do">## by default the repository branch name is appended to the module folder name.</span></span>
<span id="cb13-12"><a href="landr-biomass_validationknn-module.html#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="do">## so we change the folder name to remove the &quot;-master&quot; suffix.</span></span>
<span id="cb13-13"><a href="landr-biomass_validationknn-module.html#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="fu">file.rename</span>(<span class="fu">c</span>(<span class="fu">file.path</span>(spadesModulesDirectory, <span class="st">&quot;Biomass_core-master&quot;</span>),</span>
<span id="cb13-14"><a href="landr-biomass_validationknn-module.html#cb13-14" aria-hidden="true" tabindex="-1"></a>              <span class="fu">file.path</span>(spadesModulesDirectory, <span class="st">&quot;Biomass_validationKNN-master&quot;</span>)),</span>
<span id="cb13-15"><a href="landr-biomass_validationknn-module.html#cb13-15" aria-hidden="true" tabindex="-1"></a>            <span class="fu">c</span>(<span class="fu">file.path</span>(spadesModulesDirectory, <span class="st">&quot;Biomass_core&quot;</span>),</span>
<span id="cb13-16"><a href="landr-biomass_validationknn-module.html#cb13-16" aria-hidden="true" tabindex="-1"></a>              <span class="fu">file.path</span>(spadesModulesDirectory, <span class="st">&quot;Biomass_validationKNN&quot;</span>)))</span></code></pre></div>
</div>
<div id="setup-simulation-2" class="section level3">
<h3>Setup simulation</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="landr-biomass_validationknn-module.html#cb14-1" aria-hidden="true" tabindex="-1"></a>times <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">start =</span> <span class="dv">2001</span>, <span class="at">end =</span> <span class="dv">2011</span>)</span>
<span id="cb14-2"><a href="landr-biomass_validationknn-module.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="landr-biomass_validationknn-module.html#cb14-3" aria-hidden="true" tabindex="-1"></a>studyArea <span class="ot">&lt;-</span> <span class="fu">Cache</span>(randomStudyArea, <span class="at">size =</span> <span class="fl">1e7</span>) <span class="co"># cache this so it creates a random one only once on a machine</span></span>
<span id="cb14-4"><a href="landr-biomass_validationknn-module.html#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="landr-biomass_validationknn-module.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pick the species you want to work with -- using the naming convention in &quot;Boreal&quot; column of LandR::sppEquivalencies_CA</span></span>
<span id="cb14-6"><a href="landr-biomass_validationknn-module.html#cb14-6" aria-hidden="true" tabindex="-1"></a>speciesNameConvention <span class="ot">&lt;-</span> <span class="st">&quot;Boreal&quot;</span></span>
<span id="cb14-7"><a href="landr-biomass_validationknn-module.html#cb14-7" aria-hidden="true" tabindex="-1"></a>speciesToUse <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Pice_Gla&quot;</span>, <span class="st">&quot;Popu_Tre&quot;</span>, <span class="st">&quot;Pinu_Con&quot;</span>)</span>
<span id="cb14-8"><a href="landr-biomass_validationknn-module.html#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="landr-biomass_validationknn-module.html#cb14-9" aria-hidden="true" tabindex="-1"></a>sppEquiv <span class="ot">&lt;-</span> LandR<span class="sc">::</span>sppEquivalencies_CA[<span class="fu">get</span>(speciesNameConvention) <span class="sc">%in%</span> speciesToUse]</span>
<span id="cb14-10"><a href="landr-biomass_validationknn-module.html#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign a colour convention for graphics for each species</span></span>
<span id="cb14-11"><a href="landr-biomass_validationknn-module.html#cb14-11" aria-hidden="true" tabindex="-1"></a>sppColorVect <span class="ot">&lt;-</span> LandR<span class="sc">::</span><span class="fu">sppColors</span>(sppEquiv, speciesNameConvention,</span>
<span id="cb14-12"><a href="landr-biomass_validationknn-module.html#cb14-12" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">newVals =</span> <span class="st">&quot;Mixed&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Set1&quot;</span>)</span>
<span id="cb14-13"><a href="landr-biomass_validationknn-module.html#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="landr-biomass_validationknn-module.html#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Usage example</span></span>
<span id="cb14-15"><a href="landr-biomass_validationknn-module.html#cb14-15" aria-hidden="true" tabindex="-1"></a>modules <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="st">&quot;Biomass_core&quot;</span>)</span>
<span id="cb14-16"><a href="landr-biomass_validationknn-module.html#cb14-16" aria-hidden="true" tabindex="-1"></a>objects <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">studyArea =</span> studyArea, <span class="at">sppEquiv =</span> sppEquiv, <span class="at">sppColorVect =</span> sppColorVect)</span>
<span id="cb14-17"><a href="landr-biomass_validationknn-module.html#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="landr-biomass_validationknn-module.html#cb14-18" aria-hidden="true" tabindex="-1"></a>successionTimestep <span class="ot">&lt;-</span> 20L</span>
<span id="cb14-19"><a href="landr-biomass_validationknn-module.html#cb14-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-20"><a href="landr-biomass_validationknn-module.html#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="do">## keep default values for most parameters </span></span>
<span id="cb14-21"><a href="landr-biomass_validationknn-module.html#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="do">## (ommitted from this list)</span></span>
<span id="cb14-22"><a href="landr-biomass_validationknn-module.html#cb14-22" aria-hidden="true" tabindex="-1"></a>parameters <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb14-23"><a href="landr-biomass_validationknn-module.html#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">Biomass_core =</span> <span class="fu">list</span>(</span>
<span id="cb14-24"><a href="landr-biomass_validationknn-module.html#cb14-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;sppEquivCol&quot;</span> <span class="ot">=</span> speciesNameConvention</span>
<span id="cb14-25"><a href="landr-biomass_validationknn-module.html#cb14-25" aria-hidden="true" tabindex="-1"></a>    , <span class="st">&quot;successionTimestep&quot;</span> <span class="ot">=</span> successionTimestep</span>
<span id="cb14-26"><a href="landr-biomass_validationknn-module.html#cb14-26" aria-hidden="true" tabindex="-1"></a>    , <span class="st">&quot;.plotInitialTime&quot;</span> <span class="ot">=</span> times<span class="sc">$</span>start</span>
<span id="cb14-27"><a href="landr-biomass_validationknn-module.html#cb14-27" aria-hidden="true" tabindex="-1"></a>    , <span class="st">&quot;.plotInterval&quot;</span> <span class="ot">=</span> 1L</span>
<span id="cb14-28"><a href="landr-biomass_validationknn-module.html#cb14-28" aria-hidden="true" tabindex="-1"></a>    , <span class="st">&quot;.plots&quot;</span> <span class="ot">=</span> <span class="st">&quot;png&quot;</span></span>
<span id="cb14-29"><a href="landr-biomass_validationknn-module.html#cb14-29" aria-hidden="true" tabindex="-1"></a>    , <span class="st">&quot;.saveInitialTime&quot;</span> <span class="ot">=</span> times<span class="sc">$</span>start</span>
<span id="cb14-30"><a href="landr-biomass_validationknn-module.html#cb14-30" aria-hidden="true" tabindex="-1"></a>    , <span class="st">&quot;.useCache&quot;</span> <span class="ot">=</span> <span class="st">&quot;init&quot;</span></span>
<span id="cb14-31"><a href="landr-biomass_validationknn-module.html#cb14-31" aria-hidden="true" tabindex="-1"></a>    , <span class="st">&quot;.useParallel&quot;</span> <span class="ot">=</span> <span class="cn">FALSE</span></span>
<span id="cb14-32"><a href="landr-biomass_validationknn-module.html#cb14-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-33"><a href="landr-biomass_validationknn-module.html#cb14-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-34"><a href="landr-biomass_validationknn-module.html#cb14-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-35"><a href="landr-biomass_validationknn-module.html#cb14-35" aria-hidden="true" tabindex="-1"></a>outputs <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">expand.grid</span>(<span class="at">objectName =</span> <span class="st">&quot;cohortData&quot;</span>,</span>
<span id="cb14-36"><a href="landr-biomass_validationknn-module.html#cb14-36" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">saveTime =</span> <span class="fu">unique</span>(<span class="fu">seq</span>(times<span class="sc">$</span>start, times<span class="sc">$</span>end, <span class="at">by =</span> <span class="dv">1</span>)),</span>
<span id="cb14-37"><a href="landr-biomass_validationknn-module.html#cb14-37" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">eventPriority =</span> <span class="dv">1</span>,</span>
<span id="cb14-38"><a href="landr-biomass_validationknn-module.html#cb14-38" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>))</span>
<span id="cb14-39"><a href="landr-biomass_validationknn-module.html#cb14-39" aria-hidden="true" tabindex="-1"></a>outputs <span class="ot">&lt;-</span> <span class="fu">rbind</span>(outputs, <span class="fu">data.frame</span>(<span class="at">objectName =</span> <span class="st">&quot;pixelGroupMap&quot;</span>,</span>
<span id="cb14-40"><a href="landr-biomass_validationknn-module.html#cb14-40" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">saveTime =</span> <span class="fu">unique</span>(<span class="fu">seq</span>(times<span class="sc">$</span>start, times<span class="sc">$</span>end, <span class="at">by =</span> <span class="dv">1</span>)),</span>
<span id="cb14-41"><a href="landr-biomass_validationknn-module.html#cb14-41" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">eventPriority =</span> <span class="dv">1</span>))</span></code></pre></div>
</div>
<div id="run-simulation-1" class="section level3">
<h3>Run simulation</h3>
<p>Here we run a simulation with three replicates using the <code>experiment2</code> function
of the <code>SpaDES.experiment</code> R package <span class="citation">(<a href="#ref-McIntireChubaty2021" role="doc-biblioref">McIntire &amp; Chubaty 2021</a>)</span>, which builds a
folder structure where simulation outputs are conveniently organised.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="landr-biomass_validationknn-module.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">graphics.off</span>()</span>
<span id="cb15-2"><a href="landr-biomass_validationknn-module.html#cb15-2" aria-hidden="true" tabindex="-1"></a>mySimInit <span class="ot">&lt;-</span> <span class="fu">simInit</span>(<span class="at">times =</span> times,</span>
<span id="cb15-3"><a href="landr-biomass_validationknn-module.html#cb15-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">params =</span> parameters, </span>
<span id="cb15-4"><a href="landr-biomass_validationknn-module.html#cb15-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">modules =</span> modules, </span>
<span id="cb15-5"><a href="landr-biomass_validationknn-module.html#cb15-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">objects =</span> objects, </span>
<span id="cb15-6"><a href="landr-biomass_validationknn-module.html#cb15-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">paths =</span> paths,</span>
<span id="cb15-7"><a href="landr-biomass_validationknn-module.html#cb15-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">outputs =</span> outputs)</span>
<span id="cb15-8"><a href="landr-biomass_validationknn-module.html#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="landr-biomass_validationknn-module.html#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(sequential)</span>
<span id="cb15-10"><a href="landr-biomass_validationknn-module.html#cb15-10" aria-hidden="true" tabindex="-1"></a>mySimExperiment <span class="ot">&lt;-</span> <span class="fu">experiment2</span>(</span>
<span id="cb15-11"><a href="landr-biomass_validationknn-module.html#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">sim1 =</span> mySimInit,</span>
<span id="cb15-12"><a href="landr-biomass_validationknn-module.html#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">clearSimEnv =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-13"><a href="landr-biomass_validationknn-module.html#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">replicates =</span> <span class="dv">3</span>)</span></code></pre></div>
</div>
<div id="validate-simulation-outputs-with-biomass_validationknn" class="section level3">
<h3>Validate simulation outputs with <em>Biomass_validationKNN</em></h3>
<p>Note that because we ran <em>Biomass_core</em> by itself using theoretical input data,
we can expect the validation to reveal that the module didn’t do a great job at
reproducing observed patterns.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="landr-biomass_validationknn-module.html#cb16-1" aria-hidden="true" tabindex="-1"></a>simulationOutputs <span class="ot">&lt;-</span> <span class="fu">lapply</span>(mySimExperiment, <span class="at">FUN =</span> <span class="cf">function</span>(x, localSimPaths) {</span>
<span id="cb16-2"><a href="landr-biomass_validationknn-module.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  oldPath <span class="ot">&lt;-</span> <span class="fu">dirname</span>(<span class="fu">outputPath</span>(x)) <span class="do">## exclude sim*_rep* folder</span></span>
<span id="cb16-3"><a href="landr-biomass_validationknn-module.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  DT <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(<span class="fu">outputs</span>(x))</span>
<span id="cb16-4"><a href="landr-biomass_validationknn-module.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  DT[, file <span class="sc">:</span><span class="er">=</span> <span class="fu">sub</span>(oldPath, localSimPaths<span class="sc">$</span>outputPath, file)]</span>
<span id="cb16-5"><a href="landr-biomass_validationknn-module.html#cb16-5" aria-hidden="true" tabindex="-1"></a>  DT</span>
<span id="cb16-6"><a href="landr-biomass_validationknn-module.html#cb16-6" aria-hidden="true" tabindex="-1"></a>}, <span class="at">localSimPaths =</span> <span class="fu">as.list</span>(<span class="fu">normPath</span>(paths)))</span>
<span id="cb16-7"><a href="landr-biomass_validationknn-module.html#cb16-7" aria-hidden="true" tabindex="-1"></a>simulationOutputs <span class="ot">&lt;-</span> <span class="fu">rbindlist</span>(simulationOutputs)</span>
<span id="cb16-8"><a href="landr-biomass_validationknn-module.html#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="landr-biomass_validationknn-module.html#cb16-9" aria-hidden="true" tabindex="-1"></a>validationPaths <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">normPath</span>(paths))</span>
<span id="cb16-10"><a href="landr-biomass_validationknn-module.html#cb16-10" aria-hidden="true" tabindex="-1"></a>validationPaths<span class="sc">$</span>outputPath <span class="ot">&lt;-</span> <span class="fu">file.path</span>(validationPaths<span class="sc">$</span>outputPath, <span class="st">&quot;validation&quot;</span>)</span>
<span id="cb16-11"><a href="landr-biomass_validationknn-module.html#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="landr-biomass_validationknn-module.html#cb16-12" aria-hidden="true" tabindex="-1"></a>validationTimes <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">start =</span> <span class="dv">1</span>, <span class="at">end =</span> <span class="dv">1</span>)</span>
<span id="cb16-13"><a href="landr-biomass_validationknn-module.html#cb16-13" aria-hidden="true" tabindex="-1"></a>validationParams <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb16-14"><a href="landr-biomass_validationknn-module.html#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">Biomass_validationKNN =</span> <span class="fu">list</span>(</span>
<span id="cb16-15"><a href="landr-biomass_validationknn-module.html#cb16-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;sppEquivCol&quot;</span> <span class="ot">=</span> <span class="fu">params</span>(mySimInit)<span class="sc">$</span>Biomass_core<span class="sc">$</span>sppEquivCol</span>
<span id="cb16-16"><a href="landr-biomass_validationknn-module.html#cb16-16" aria-hidden="true" tabindex="-1"></a>    , <span class="st">&quot;validationReps&quot;</span> <span class="ot">=</span> <span class="fu">as.integer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)  <span class="do">## or length of simLists</span></span>
<span id="cb16-17"><a href="landr-biomass_validationknn-module.html#cb16-17" aria-hidden="true" tabindex="-1"></a>    , <span class="st">&quot;validationYears&quot;</span> <span class="ot">=</span> <span class="fu">as.integer</span>(<span class="fu">c</span>(<span class="dv">2001</span>, <span class="dv">2011</span>))</span>
<span id="cb16-18"><a href="landr-biomass_validationknn-module.html#cb16-18" aria-hidden="true" tabindex="-1"></a>    , <span class="st">&quot;.plots&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;png&quot;</span>)</span>
<span id="cb16-19"><a href="landr-biomass_validationknn-module.html#cb16-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-20"><a href="landr-biomass_validationknn-module.html#cb16-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-21"><a href="landr-biomass_validationknn-module.html#cb16-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-22"><a href="landr-biomass_validationknn-module.html#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="do">## make an empty fire polygon object to bypass removing fire-disturbed pixels</span></span>
<span id="cb16-23"><a href="landr-biomass_validationknn-module.html#cb16-23" aria-hidden="true" tabindex="-1"></a>noFires <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_polygon</span>()</span>
<span id="cb16-24"><a href="landr-biomass_validationknn-module.html#cb16-24" aria-hidden="true" tabindex="-1"></a>validationObjects <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb16-25"><a href="landr-biomass_validationknn-module.html#cb16-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;biomassMap&quot;</span> <span class="ot">=</span> mySimExperiment<span class="sc">$</span>sim1_rep1<span class="sc">$</span>biomassMap</span>
<span id="cb16-26"><a href="landr-biomass_validationknn-module.html#cb16-26" aria-hidden="true" tabindex="-1"></a>  , <span class="st">&quot;firePerimeters&quot;</span> <span class="ot">=</span> noFires</span>
<span id="cb16-27"><a href="landr-biomass_validationknn-module.html#cb16-27" aria-hidden="true" tabindex="-1"></a>  , <span class="st">&quot;rasterToMatch&quot;</span> <span class="ot">=</span> mySimExperiment<span class="sc">$</span>sim1_rep1<span class="sc">$</span>rasterToMatch</span>
<span id="cb16-28"><a href="landr-biomass_validationknn-module.html#cb16-28" aria-hidden="true" tabindex="-1"></a>  , <span class="st">&quot;rawBiomassMapStart&quot;</span> <span class="ot">=</span> mySimExperiment<span class="sc">$</span>sim1_rep1<span class="sc">$</span>biomassMap</span>
<span id="cb16-29"><a href="landr-biomass_validationknn-module.html#cb16-29" aria-hidden="true" tabindex="-1"></a>  , <span class="st">&quot;simulationOutputs&quot;</span> <span class="ot">=</span> simulationOutputs</span>
<span id="cb16-30"><a href="landr-biomass_validationknn-module.html#cb16-30" aria-hidden="true" tabindex="-1"></a>  , <span class="st">&quot;speciesLayersStart&quot;</span> <span class="ot">=</span> mySimExperiment<span class="sc">$</span>sim1_rep1<span class="sc">$</span>speciesLayers</span>
<span id="cb16-31"><a href="landr-biomass_validationknn-module.html#cb16-31" aria-hidden="true" tabindex="-1"></a>  , <span class="st">&quot;sppColorVect&quot;</span> <span class="ot">=</span> mySimExperiment<span class="sc">$</span>sim1_rep1<span class="sc">$</span>sppColorVect</span>
<span id="cb16-32"><a href="landr-biomass_validationknn-module.html#cb16-32" aria-hidden="true" tabindex="-1"></a>  , <span class="st">&quot;sppEquiv&quot;</span> <span class="ot">=</span> mySimExperiment<span class="sc">$</span>sim1_rep1<span class="sc">$</span>sppEquiv</span>
<span id="cb16-33"><a href="landr-biomass_validationknn-module.html#cb16-33" aria-hidden="true" tabindex="-1"></a>  , <span class="st">&quot;studyArea&quot;</span> <span class="ot">=</span> mySimExperiment<span class="sc">$</span>sim1_rep1<span class="sc">$</span>studyArea</span>
<span id="cb16-34"><a href="landr-biomass_validationknn-module.html#cb16-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-35"><a href="landr-biomass_validationknn-module.html#cb16-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-36"><a href="landr-biomass_validationknn-module.html#cb16-36" aria-hidden="true" tabindex="-1"></a>mySimValidation <span class="ot">&lt;-</span> <span class="fu">simInitAndSpades</span>(<span class="at">times =</span> validationTimes</span>
<span id="cb16-37"><a href="landr-biomass_validationknn-module.html#cb16-37" aria-hidden="true" tabindex="-1"></a>                                    , <span class="at">params =</span> validationParams</span>
<span id="cb16-38"><a href="landr-biomass_validationknn-module.html#cb16-38" aria-hidden="true" tabindex="-1"></a>                                    , <span class="at">modules =</span> <span class="st">&quot;Biomass_validationKNN&quot;</span></span>
<span id="cb16-39"><a href="landr-biomass_validationknn-module.html#cb16-39" aria-hidden="true" tabindex="-1"></a>                                    , <span class="at">objects =</span> validationObjects</span>
<span id="cb16-40"><a href="landr-biomass_validationknn-module.html#cb16-40" aria-hidden="true" tabindex="-1"></a>                                    , <span class="at">paths =</span> validationPaths</span>
<span id="cb16-41"><a href="landr-biomass_validationknn-module.html#cb16-41" aria-hidden="true" tabindex="-1"></a>                                    , <span class="at">.studyAreaName =</span> SAname)</span></code></pre></div>
<p>Here are some of the output figures automatically produced by
<em>Biomass_validationKNN</em></p>
<div class="figure"><span style="display:block;" id="fig:fig-Biomass-validationKNNOutPlots"></span>
<img src="figures/LandscapeComparisons_PresAbs.png" alt="Biomass_validationKNN automatically generates plots showing a visual comparison between simulated and observed species presences (right) across the landscape, and relative species biomass per pixel (left)." width="50%" /><img src="figures/PixelComparisons_relB.png" alt="Biomass_validationKNN automatically generates plots showing a visual comparison between simulated and observed species presences (right) across the landscape, and relative species biomass per pixel (left)." width="50%" />
<p class="caption">
Figure 9: <em>Biomass_validationKNN</em> automatically generates plots showing a visual comparison between simulated and observed species presences (right) across the landscape, and relative species biomass per pixel (left).
</p>
</div>
<div class="figure"><span style="display:block;" id="fig:fig-Biomass-validationKNNOutPlots2"></span>
<img src="figures/landscapeMAD.png" alt="A plot of landscape-wide mean absolute deviations (MAD) from (top to bottom) observed mean relative abundance, no. of presences, no. of pixels where the species is dominant and $\Delta$B."  />
<p class="caption">
Figure 10: A plot of landscape-wide mean absolute deviations (MAD) from (top to bottom) observed mean relative abundance, no. of presences, no. of pixels where the species is dominant and <span class="math inline">\(\Delta\)</span>B.
</p>
</div>
<div class="figure"><span style="display:block;" id="fig:fig-Biomass-validationKNNOutPlots3"></span>
<img src="figures/observedDeltaBDeltaAge.png" alt="Diagnostic plot of observed changes in biomass and age $\Delta$B and $\Delta$Age, respectively)."  />
<p class="caption">
Figure 11: Diagnostic plot of observed changes in biomass and age <span class="math inline">\(\Delta\)</span>B and <span class="math inline">\(\Delta\)</span>Age, respectively).
</p>
</div>
</div>
</div>
<div id="references-3" class="section level2">
<h2>References</h2>

<div id="refs" class="references csl-bib-body hanging-indent">
<div class="csl-entry">
Barros, C., Luo, Y., Chubaty, A.M., Eddy, I.M.S., Micheletti, T., Boisvenue, C., <em>et al.</em> (n.d.). Empowering ecologists with a PERFICT workflow: Seamlessly linking data, parameterization, prediction, validation and visualization.
</div>
<div class="csl-entry">
Beaudoin, A., Bernier, P.Y., Villemaire, P., Guindon, L. &amp; Guo, X.J. (2017). <a href="https://doi.org/10.23687/EC9E2659-1C29-4DDB-87A2-6ACED147A990">Species composition, forest properties and land cover types across canada’s forests at 250m resolution for 2001 and 2011</a>.
</div>
<div class="csl-entry">
Burton, P.J. &amp; Cumming, S.G. (1995). Potential effects of climatic change on some western canadian forests, based on phenological enhancements to a patch model of forest succession. <em>Water, Air and Soil Pollution</em>, 82, 401–414.
</div>
<div class="csl-entry">
Chubaty, A.M. &amp; McIntire, E.J.B. (2019). <em><a href="https://CRAN.R-project.org/package=SpaDES">SpaDES: Develop and run spatially explicit discrete event simulation models</a></em>.
</div>
<div class="csl-entry">
Cosco, J. (2011). <em>COMMON ATTRIBUTE SCHEMA (CAS) FOR FOREST INVENTORIES ACROSS CANADA</em>. BOREAL AVIAN MODELLING PROJECT, CANADIAN BEACONs PROJECT.
</div>
<div class="csl-entry">
Hogg, E.H.(Ted)., Brandt, J.P. &amp; Michaelian, M. (2008). <a href="https://doi.org/10.1139/X08-001">Impacts of a regional drought on the productivity, dieback, and biomass of western canadian aspen forests</a>. <em>Canadian Journal of Forest Research</em>, 38, 1373–1384.
</div>
<div class="csl-entry">
McIntire, E.J.B. &amp; Chubaty, A.M. (2020). <em><a href="https://reproducible.predictiveecology.org, https://github.com/PredictiveEcology/reproducible">Reproducible: A set of tools that enhance reproducibility beyond package management</a></em>.
</div>
<div class="csl-entry">
McIntire, E.J.B. &amp; Chubaty, A.M. (2021). <em><a href="https://github.com/PredictiveEcology/SpaDES.experiment">SpaDES.experiment: Simulation experiments within the SpaDES ecosystem</a></em>.
</div>
<div class="csl-entry">
Messier, C., Parent, S. &amp; Bergeron, Y. (1998). <a href="https://doi.org/10.2307/3237266">Effects of overstory and understory vegetation on the understory light environment in mixed boreal forests</a>. <em>Journal of Vegetation Science</em>, 9, 511–520.
</div>
<div class="csl-entry">
NRCan. (2013). National ecological framework for canada - terrestrial ecozones.
</div>
<div class="csl-entry">
Peng, C., Ma, Z., Lei, X., Zhu, Q., Chen, H., Wang, W., <em>et al.</em> (2011). <a href="https://doi.org/10.1038/nclimate1293">A drought-induced pervasive increase in tree mortality across canada’s boreal forests</a>. <em>Nature Climate Change</em>, 1, 467–471.
</div>
<div class="csl-entry">
Scheller, R.M. &amp; Domingo, J.B. (2011). <em>LANDIS-II model v6.0 <span></span> user guide</em>.
</div>
<div class="csl-entry">
Scheller, R.M. &amp; Domingo, J.B. (2012). <em>LANDIS-II model v6.0 <span></span> conceptual description</em>.
</div>
<div class="csl-entry">
Scheller, R.M. &amp; Miranda, B.R. (2015a). <em>LANDIS-II biomass succession v3.2 extension – user guide</em>.
</div>
<div class="csl-entry">
Scheller, R.M. &amp; Miranda, B.R. (2015b). <em>LANDIS-II biomass succession v3.2 extension <span></span> user guide</em>.
</div>
<div class="csl-entry">
Scheller, R.M. &amp; Mladenoff, D.J. (2004). <a href="https://doi.org/10.1016/j.ecolmodel.2004.01.022">A forest growth and biomass module for a landscape simulation model, LANDIS: design, validation, and application</a>. <em>Ecological Modelling</em>, 180, 211–229.
</div>
<div class="csl-entry">
Stall, S., Yarmey, L., Cutcher-Gershenfeld, J., Hanson, B., Lehnert, K., Nosek, B., <em>et al.</em> (2019). <a href="https://doi.org/10.1038/d41586-019-01720-7">Make scientific data FAIR</a>. <em>Nature</em>, 570, 27–29.
</div>
<div class="csl-entry">
Wickham, H. (2011). <a href="https://doi.org/10.32614/RJ-2011-002">testthat: Get Started with Testing</a>. <em>The R Journal</em>, 3, 5.
</div>
<div class="csl-entry">
Yang, J., He, H.S., Shifley, S.R., Thompson, F.R. &amp; Zhang, Y. (2011). <a href="https://doi.org/10.1016/j.ecolmodel.2011.04.032">An innovative computer design for modeling forest landscape change in very large spatial extents with fine resolutions</a>. <em>Ecological Modelling</em>, 222, 2623–2630.
</div>
</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-McIntireChubaty2021" class="csl-entry">
McIntire, E.J.B. &amp; Chubaty, A.M. (2021). <em><a href="https://github.com/PredictiveEcology/SpaDES.experiment">SpaDES.experiment: Simulation experiments within the SpaDES ecosystem</a></em>.
</div>
<div id="ref-StallEtAl2019" class="csl-entry">
Stall, S., Yarmey, L., Cutcher-Gershenfeld, J., Hanson, B., Lehnert, K., Nosek, B., <em>et al.</em> (2019). <a href="https://doi.org/10.1038/d41586-019-01720-7">Make scientific data FAIR</a>. <em>Nature</em>, 570, 27–29.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="landr-validation-modules.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["LandRManual.pdf", "LandRManual.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"info": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
